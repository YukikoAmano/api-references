{"path":"global-server-variable/api","templateID":1,"sharedPropsHashes":{"apiList":"2eDKhW"},"localProps":{"reference":{"title":"グローバルサーバー変数APIを利用する","slug":"global-server-variable/api","description":"RPGアツマール ゲームAPIを使ったグローバルサーバー変数の利用方法について解説します。","order":3,"experimental":true,"contents":"<p>APIを使ったグローバルサーバー変数の利用方法について解説します。予め、<a href=\"/global-server-variable/setting\">グローバルサーバー変数設定画面</a>で変数及びトリガーの設定を済ませておく必要があります。</p>\n<h2>グローバルサーバー変数取得</h2>\n<p>グローバルサーバー変数のIDを指定し、現在値、最大値、最小値、変数名を取得します。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.globalServerVariable.getGlobalServerVariable(globalServerVariableId: number)</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">引数に指定した globalServerVariableId のグローバルサーバー変数の情報を取得する</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">グローバルサーバー変数ID (自然数) ※<a href=\"/global-server-variable/setting\">グローバルサーバー変数設定画面</a>で設定</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;GlobalServerVariableData&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n</tbody></table>\n<h3>戻り値の型 GlobalServerVariableData について</h3>\n<p>戻り値で取得できる <code>GlobalServerVariableData</code> は以下のような型です。</p>\n<pre><code class=\"lang-js\">interface GlobalServerVariableData {\n  name: string,\n  maxValue: number,\n  minValue: number,\n  value: number\n}</code></pre>\n<p>プロパティの内容は次のようになっています。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">プロパティ名</th>\n<th align=\"left\">型</th>\n<th align=\"left\">内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">value</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">グローバルサーバー変数の現在値</td>\n</tr>\n<tr>\n<td align=\"left\">minValue</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">グローバルサーバー変数の最小値</td>\n</tr>\n<tr>\n<td align=\"left\">maxValue</td>\n<td align=\"left\"><code>number</code></td>\n<td align=\"left\">グローバルサーバー変数の最大値</td>\n</tr>\n<tr>\n<td align=\"left\">name</td>\n<td align=\"left\"><code>string</code></td>\n<td align=\"left\">グローバルサーバー変数の変数名</td>\n</tr>\n</tbody></table>\n<h3>戻り値の例</h3>\n<pre><code class=\"lang-js\">// window.RPGAtsumaru.experimental.globalServerVariable.getGlobalServerVariable(1).then(function(v) { console.log(v) }) を実行\n{\n  &quot;name&quot;: &quot;レイドボスHP&quot;,\n  &quot;maxValue&quot;: 10000,\n  &quot;minValue&quot;: 0,\n  &quot;value&quot;: 1234\n}</code></pre>\n<h3>起こりうるエラーの種類</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">BAD_REQUEST</a></td>\n<td align=\"left\"><ul><li>指定したグローバルサーバー変数IDがそのゲームのものではない</li><li>引数として不正な値を指定している</li></ul></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールのサービス側で何らかの問題が発生しているか、または通信に失敗した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にRPGアツマール ゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n<h2>トリガー発動</h2>\n<p>予め設定したトリガーIDを指定して、グローバルサーバー変数の値を変化させます。</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.globalServerVariable.triggerCall(triggerId:number, delta?: number)</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">説明</td>\n<td align=\"left\">引数に指定したtriggeridのトリガーを発動させる</td>\n</tr>\n<tr>\n<td align=\"left\">引数</td>\n<td align=\"left\"><ul><li><code>triggerId</code>: トリガーID (自然数) ※<a href=\"/global-server-variable/setting\">グローバルサーバー変数設定画面</a>で設定</li><li><code>delta</code>: 変数を増減させる値 (「ゲーム内で増減値を指定して実行」トリガーの場合のみ指定可能)</li></ul></td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;void&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n</tbody></table>\n<ul>\n<li>引数 <code>delta</code> はトリガーの種別が「ゲーム内で増減値を指定して実行」のときのみ指定可能です。\n-「ゲーム内から実行」トリガーの場合は指定しないでください。</li>\n</ul>\n<h3>起こりうるエラーの種類</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">名前</th>\n<th align=\"left\">説明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><a href=\"/common/errors\">BAD_REQUEST</a></td>\n<td align=\"left\"><ul><li>指定したトリガーIDがそのゲームのものではない</li><li>「ゲーム内から実行」トリガーで <code>delta</code> を指定した</li><li>「ゲーム内で増減値を指定して実行」トリガーで <code>delta</code> を省略した</li><li>引数として不正な値を指定している</li></ul></td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">INTERNAL_SERVER_ERROR</a></td>\n<td align=\"left\">RPGアツマールのサービス側で何らかの問題が発生しているか、または通信に失敗した</td>\n</tr>\n<tr>\n<td align=\"left\"><a href=\"/common/errors\">API_CALL_LIMIT_EXCEEDED</a></td>\n<td align=\"left\">短時間にゲームAPIを利用しすぎて、一時的に利用を制限されている</td>\n</tr>\n</tbody></table>\n"},"title":"グローバルサーバー変数APIを利用する","path":"/global-server-variable/api"}}
