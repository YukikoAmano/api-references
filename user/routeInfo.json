{"path":"user","templateID":1,"sharedPropsHashes":{"apiList":"Z2bsMi6"},"localProps":{"reference":{"title":"ユーザー情報にアクセスする","slug":"user","description":"プレイヤー自身のユーザー情報や、他のプレイヤーのユーザー情報にアクセスできます。","order":26,"experimental":true,"contents":"<h2>概要</h2>\n<p>RPGアツマールを使ったことのあるniconicoユーザーの情報を取得できる機能です。</p>\n<h3>なにができるのか</h3>\n<p>次の3種類の取得方法を提供しています。</p>\n<ul>\n<li>現在ゲームをプレイしているログインユーザーのユーザー情報を取得</li>\n<li>ユーザーIDを指定して特定のユーザー情報を取得</li>\n<li>現在のゲームを最近プレイしたユーザーの情報の取得</li>\n</ul>\n<p>ただし、他人のユーザー情報を取得するには、そのユーザーが <a href=\"/common/interplayer\">プレイヤー間通信の有効化</a> を先にしている必要があります。</p>\n<h4>利用想定／利用例</h4>\n<p>例えば、次のような利用を想定しています。</p>\n<ul>\n<li>プレイしているユーザーがログインしているかどうかを判別し、他のログイン必須APIを呼び出せるか事前に調べる</li>\n<li>idを指定したユーザーの情報を取得し、フレンド機能を実装する</li>\n<li>最近プレイしたユーザーの情報を取得し、すれちがい通信のような機能を実装する</li>\n</ul>\n<p>例えば、次のサンプルゲームではこの機能を利用し、フォームに入力されたuseridのユーザー情報を表示しています。ただし、<a href=\"/common/interplayer\">プレイヤー間通信の有効化</a>が必要なため、このゲームをプレイしたことがあるユーザーの情報のみになります。</p>\n<ul>\n<li><a href=\"https://game.nicovideo.jp/atsumaru/games/gm9289\">【ゲームAPIサンプル】ユーザー情報取得できるくん（ユーザー情報取得API）</a></li>\n</ul>\n<p>また、こちらのサンプルでは、最近プレイしたユーザーの情報を利用しています。</p>\n<ul>\n<li><a href=\"https://game.nicovideo.jp/atsumaru/games/gm9291\">【ゲームAPIサンプル】AsyncProfile（ユーザー情報取得API・共有セーブAPI）</a></li>\n<li><a href=\"https://game.nicovideo.jp/atsumaru/games/gm9294\">【ゲームAPIサンプル】スライムバトラー（ユーザーシグナルAPI・共有セーブAPI）</a></li>\n</ul>\n<h2>利用方法</h2>\n<ul>\n<li>本機能は次の方法で利用できます。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">方法</th>\n<th align=\"left\">場所</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">公式プラグイン</td>\n<td align=\"left\"><ul><li><a href=\"https://raw.githubusercontent.com/atsumaru/mv-plugins/master/plugins/AtsumaruGetSelfInformationExperimental.js\">現在ゲームをプレイしているログインユーザーのユーザー情報を取得</a></li><li><a href=\"https://raw.githubusercontent.com/atsumaru/mv-plugins/master/plugins/AtsumaruGetUserInformationExperimental.js\">ユーザーIDを指定して特定のユーザー情報を取得</a></li><li><a href=\"https://raw.githubusercontent.com/atsumaru/mv-plugins/master/plugins/AtsumaruGetRecentUsersExperimental.js\">現在のゲームを最近プレイしたユーザーの情報の取得</a></li></ul></td>\n</tr>\n<tr>\n<td align=\"left\">ゲームAPI</td>\n<td align=\"left\">以下の「APIでの利用方法」を参考に、直接APIを呼び出してください</td>\n</tr>\n</tbody></table>\n<h3>公式プラグインの利用方法</h3>\n<h4>現在ゲームをプレイしているログインユーザーのユーザー情報を取得</h4>\n<h5>プラグイン設置方法</h5>\n<ol>\n<li>プロジェクトのプラグインフォルダに <a href=\"https://raw.githubusercontent.com/atsumaru/mv-plugins/master/plugins/AtsumaruGetSelfInformationExperimental.js\">AtsumaruGetSelfInformationExperimental.js</a> を右クリックし「保存」して設置。</li>\n<li>プロジェクトのプラグイン設定で <code>AtsumaruGetSelfInformationExperimental</code> プラグインをONにする。</li>\n<li>プラグイン設定画面で、取得したユーザー情報の収納先変数を設定する。</li>\n</ol>\n<h5>利用方法</h5>\n<p>プラグインコマンドは次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>GetSelfInformation\nプレイヤー取得</code></pre><h4>ユーザーIDを指定して特定のユーザー情報を取得</h4>\n<h5>プラグイン設置方法</h5>\n<ol>\n<li>プロジェクトのプラグインフォルダに <a href=\"https://raw.githubusercontent.com/atsumaru/mv-plugins/master/plugins/AtsumaruGetUserInformationExperimental.js\">AtsumaruGetUserInformationExperimental.js</a> を右クリックし「保存」して設置。</li>\n<li>プロジェクトのプラグイン設定で <code>AtsumaruGetUserInformationExperimental</code> プラグインをONにする。</li>\n<li>プラグイン設定画面で、取得したユーザー情報の収納先変数を設定する。</li>\n</ol>\n<h5>利用方法</h5>\n<p>プラグインコマンドは次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>GetUserInformation &lt;userIdVariableId&gt;\n特定ユーザー取得 &lt;userIdVariableId&gt;</code></pre><h4>現在のゲームを最近プレイしたユーザーの情報の取得</h4>\n<h5>プラグイン設置方法</h5>\n<ol>\n<li>プロジェクトのプラグインフォルダに <a href=\"https://raw.githubusercontent.com/atsumaru/mv-plugins/master/plugins/AtsumaruGetRecentUsersExperimental.js\">AtsumaruGetRecentUsersExperimental.js</a> を右クリックし「保存」して設置</li>\n<li>プロジェクトのプラグイン設定で <code>AtsumaruGetRecentUsersExperimental</code> プラグインをONにする。</li>\n<li>プラグイン設定画面で、取得したユーザー情報を収納する変数のIDを指定する。</li>\n</ol>\n<h5>利用方法</h5>\n<p>プラグインコマンドは次のいずれかのように指定します。（どちらでも動作は同じです）</p>\n<pre><code>GetRecentUsers\n最新ユーザー取得</code></pre><h3>APIでの利用方法</h3>\n<p>APIを利用したユーザー情報へのアクセス</p>\n<h4>現在ゲームをプレイしているログインユーザーのユーザー情報を取得</h4>\n<ul>\n<li>現在のユーザーの情報を取得します。</li>\n<li>指定したユーザーがプレミアム会員かどうかも取得できます。</li>\n<li>プレイしているユーザーが<a href=\"/common/login\">ログイン</a>している必要があります。ログインしてない場合にエラーを返すため、それでユーザーのログイン状態を判別することができます。</li>\n<li>このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.user.getSelfInformation()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;{ id: number, name: string, profile: string, twitterId: string, url: string, isPremium: boolean }&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n</tbody></table>\n<h5>戻り値の例</h5>\n<pre><code class=\"lang-js\">{\n  id: 64341294,\n  name: &quot;RPGアツマール公式&quot;,\n  profile: &quot;やあ！ 僕はアツマライオン！\\nみんなでゲームを作って遊んで楽しもうよ！&quot;,\n  twitterId: &quot;nico_indiesgame&quot;,\n  url: &quot;https://game.nicovideo.jp/atsumaru/&quot;,\n  isPremium: false\n}</code></pre>\n<h4>ユーザーIDを指定して特定のユーザー情報を取得</h4>\n<ul>\n<li>引数でユーザーIDを指定し、指定したユーザーの情報を取得します。</li>\n<li>指定したIDのユーザーが<a href=\"/common/interplayer\">プレイヤー間通信の有効化</a>をしている必要があります。</li>\n<li>このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.user.getUserInformation(userId: number)</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">引数</td>\n<td align=\"left\"><code>userId</code> : ユーザー情報を取得したいユーザーのニコニコユーザーIDを自然数で指定します。</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;{ id: number, name: string, profile: string, twitterId: string, url: string }&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n</tbody></table>\n<h5>戻り値の例</h5>\n<pre><code class=\"lang-js\">{\n  id: 64341294,\n  name: &quot;RPGアツマール公式&quot;,\n  profile: &quot;やあ！ 僕はアツマライオン！\\nみんなでゲームを作って遊んで楽しもうよ！&quot;,\n  twitterId: &quot;nico_indiesgame&quot;,\n  url: &quot;https://game.nicovideo.jp/atsumaru/&quot;\n}</code></pre>\n<h4>現在のゲームを最近プレイしたユーザーの情報の取得</h4>\n<ul>\n<li><a href=\"/common/interplayer\">プレイヤー間通信の有効化</a>をしているユーザーを、最近現在のゲームをプレイした順番に取得します。</li>\n<li>このAPIで取得できるユーザーは、 <a href=\"/common/interplayer\">プレイヤー間通信の有効化</a> を有効化しているユーザーのみです。<ul>\n<li>ゲーム内で有効に使うために、まずゲーム内で有効化APIを呼び出すようにすると良いでしょう。</li>\n</ul>\n</li>\n<li>このAPIは<a href=\"/common/rate-limit\">APIの呼び出し回数制限</a>の対象です。</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"left\">メソッド</th>\n<th align=\"left\"><code>window.RPGAtsumaru.experimental.user.getRecentUsers()</code></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">引数</td>\n<td align=\"left\">なし</td>\n</tr>\n<tr>\n<td align=\"left\">戻り値</td>\n<td align=\"left\"><code>Promise&lt;{ id: number, name: string }[]&gt;</code></td>\n</tr>\n<tr>\n<td align=\"left\">リリース日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n<tr>\n<td align=\"left\">更新日</td>\n<td align=\"left\">2018/12/17</td>\n</tr>\n</tbody></table>\n<h5>戻り値の例</h5>\n<pre><code class=\"lang-js\">[\n  {\n    id: 64341294,\n    name: &quot;RPGアツマール公式&quot;\n  },\n  {\n    id: 63008093,\n    name: &quot;ツクール開発部公式&quot;\n  }\n]</code></pre>\n"},"title":"ユーザー情報にアクセスする","path":"/user"}}
