---
title: グローバルサーバー変数
slug: global-server-variable
description: RPGアツマール上で動作するグローバルサーバー変数です。
order: 25
experimental: true
recommendTheory: true
---

## 概要
![グローバルサーバー変数の概念図](/images/global-server-variable/concept.png)

グローバルサーバー変数はRPGアツマール内で動作する、ゲーム毎にユーザー共通の値をサーバーに記録できる仕組みです。

### なにができるのか
ユーザー間で共通の値を参照し、トリガーという機能で値を増減・変更させるゲームが作成できます。  
各ゲームごとに複数個のグローバルサーバー変数が利用できるので、変数ごとに違う値を記録し利用することができます。

#### 利用想定／利用例
この機能は、以下のような使い方を想定しています。
- プレイヤーみんなで倒すレイドボス（ボスのHPをグローバルサーバー変数に設定、攻撃をトリガーに設定）
- 全プレイヤーでエンディングまで達成した回数カウントアップ（達成をトリガーにし、変数に+1していく）

例えば、次のサンプルゲームではこの機能を利用し、ボスのHPにグローバルサーバー変数を設定しています。
- [【ゲームAPIサンプル】レイドボス（グローバルサーバー変数API）](https://game.nicovideo.jp/atsumaru/games/gm9226)
 - [プロジェクトファイルダウンロードはこちら](/download/sample-projects#RaidBoss)

## 機能詳細
 - グローバルサーバー変数を利用するには、**[グローバルサーバー変数設定画面](/global-server-variable/setting) から変数自体の設定と、対応するトリガーの設定が必要** です。
 - 新しく変数を作成すると、変数IDが発行されます。IDはすべての変数で一意（ユニーク）の値になっているため、複数の変数を利用したい場合などには、異なるIDで情報の登録・取得を行ってください。
 - 変数が作成されるとトリガーが作成できるようになります。トリガーIDもすべてのトリガーで一意（ユニーク）の値になっているため、複数のトリガーを利用したい場合などには、異なるIDで情報の登録・取得を行ってください。
 - ゲーム内からトリガーIDまたはトリガー名を指定して変数の変更を行うことができます。
 - ゲーム内からグローバルサーバー変数IDまたはグローバルサーバー変数名を指定して現在の値を取得することができます。
 - グローバルサーバー変数は、 **各ゲーム100個** まで設定可能です。

### グローバルサーバ変数の型について
グローバルサーバ変数には整数値を入れることができる「数値型」と、文字列を入れることができる「文字列型」の2つが存在します。
それぞれ数値のみ、文字列のみを入れることができます。
変数の型は、変数設定時に選ぶことができます。

### トリガーについて
グローバルサーバー変数をゲーム側から操作する機能を「トリガー」と呼びます。  
現在、トリガーは三種類用意されています。
変数に指定できるトリガーは、変数の型ごとに決まっています。例えば「固定値を増減」トリガーを「文字列型」の変数に対して実行することはできません。

トリガー|対象|詳細
:---|:---|:---
固定値を増減|数値型|固定値を増減させることができます
最大値・最小値の範囲で増減|数値型|設定した幅の中で可変の値を増減させることができます
値を代入|数値型, 文字列型|グローバルサーバ変数の値をゲーム内から指定した値に変更することができます


## 利用方法

グローバルサーバー変数は次の方法で利用できます。

方法 | 場所
:---|:---
[公式プラグイン](/global-server-variable/plugin) | [Github](https://github.com/atsumaru/mv-plugins/blob/master/plugins/AtsumaruGlobalServerVariableExperimental.js)
[ゲームAPI](/global-server-variable/api) | [リファレンス](/global-server-variable/api)を参考に、直接APIを呼び出してください


## 関連ドキュメント

- [グローバルサーバー変数設定画面を利用する](/global-server-variable/setting)
- [グローバルサーバー変数プラグインを利用する](/global-server-variable/plugin)
- [グローバルサーバー変数APIを利用する](/global-server-variable/api)
