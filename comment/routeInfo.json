{"path":"comment","templateID":1,"sharedPropsHashes":{"apiList":"2yCeH"},"localProps":{"reference":{"title":"コメント","slug":"comment","description":"ユーザー同士でゲーム体験を共有できるコメント機能について","order":6,"navi":"機能解説","contents":"<h2 id=\"-\">概要</h2>\n<p>RPGアツマールでは、ユーザーのゲーム体験を共有するためにコメント機能を提供しています。設計はRPGツクールMVでの利用を想定していますがAPIは汎用的にも利用可能です。</p>\n<h2 id=\"-\">なにができるのか</h2>\n<p>ゲームの内容に合わせてコメントを投稿・表示できます。</p>\n<h2 id=\"-\">例</h2>\n<p>RPGツクールMV製ゲームの場合、RPGアツマールが挿入する <code>rpgatsumaru.js</code> によって自動的にこの機能を利用しています。</p>\n<p>例えば以下のゲームで、この機能を利用してゲーム上にコメントを表示しています。</p>\n<ul>\n<li><a href=\"https://game.nicovideo.jp/atsumaru/games/gm7601\">【防衛ゲーム】タタの魔法使い【異世界サバイバル】</a></li>\n</ul>\n<h2 id=\"-\">詳細</h2>\n<p>本機能を実行した際に、次のような操作を行います。</p>\n<ul>\n<li>コメントシステムのscene設定</li>\n<li>sceneの切り替え</li>\n<li>contextfactorの設定</li>\n<li>contextの設定</li>\n<li>minorcontextの設定</li>\n</ul>\n<p>コメント機能は「コメントシステム」にゲーム状態を伝えると、コメントがゲーム上に流れます。ゲームは動画と異なり、時系列のようにプレイヤー全員が共有しているコンテンツの内部状態が存在しないため、ゲームでは逐次ゲーム状態をコメントシステムに伝える必要があります。この「ゲーム状態」のことを本システムではgame position(<strong>gpos</strong>)と呼んでいます。</p>\n<p>RPGツクールMVにおいては、イベントコマンドごとにgposをコメントシステムに伝達しています。そのため、例えば「ヒロインのセリフ」など特定の状態をプレイヤー間で共有できます。もし、あなたがアクションゲームをつくるなら「敵を倒した」「アイテムを得た」などのイベントをgposとしてコメントシステムに伝えることになります。</p>\n<p>gpos は scene と contextfactor と minorcontext という３つのパラメーターで表現します。プログラム的に書けば以下のようになります。</p>\n<pre><code>gpos(scene, context(contextfactor[0,-1,-2]), minorcontext)</code></pre><p>scene はコメントデータ群を表しています。scene 1つあたりで最新1,000件(※変更可能性有り)で、直近5つの scene をAPI側でキャッシュします。一般的なゲームではマップや戦闘画面、メニュー画面に相当します。</p>\n<p>scene のコメントを、context の値で指定し取得することでコメントが描画されます。context は状態遷移マシンになっており、contextfactor を push することで状態が1つ進みます。状態は最新の contextfactor 3つの複合キーで表されています。context をさらに細かく分割する場合、たとえば「あるイベント内の時間」などを示すには minorcontext が便利です。minorcontext を push するごとに状態が細かく進み、それに応じたコメントが描画されます。</p>\n<p>RPGツクールMVにおいては scene は map の id に対応します。contextfactor は「セリフ」コマンドと「選択肢」コマンドで、minorcontext は「ウェイト」コマンドと、コマンド内の wait に対応します。minorcontext があることで、「セリフのあとにキャラクターが移動して演技する」ような演出に対して細かくコメントができます。</p>\n<p><img src=\"https://atsumaru.github.io/api-references/images/comment.png\" alt=\"概念図\"></p>\n<h2 id=\"-\">利用方法</h2>\n<table>\n<thead>\n<tr>\n<th align=\"left\">方式</th>\n<th align=\"left\">利用方法</th>\n<th align=\"left\">備考</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">API</td>\n<td align=\"left\">APIでの利用方法の「<a href=\"/apis/comment\">コメント</a>」項を参考に、APIを実装してください</td>\n<td align=\"left\">他ゲームエンジンやより高度な利用を必要とするユーザー向け</td>\n</tr>\n</tbody></table>\n<p>※プラグインはありません</p>\n<h2 id=\"-\">最終更新日</h2>\n<ul>\n<li>2020/02/28</li>\n</ul>\n"},"title":"コメント","path":"/comment"}}
